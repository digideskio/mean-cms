<form class="editor-form">

  <div class="field" ng-repeat="(key, value) in config">

    <fieldset ng-if="value.type == 'text'">

      <label for="{{$parent.key}}">{{$parent.value.label | lowercase}}</label>
      <input id="{{$parent.key}}" ng-model="values[$parent.key]" type="text">
      <div class="warning" ng-show="isInvalid(key)">
        {{getValidationMsg(key)}}
      </div>
    </fieldset>

    <fieldset ng-if="value.type == 'image'">

      <label for="{{$parent.key}}">{{$parent.value.label | lowercase}}</label>
      <input id="{{$parent.key}}" type="file" />
      <a class="button" ng-click="uploadFile($parent.key)">upload</a>
      <div class="warning" ng-show="isInvalid(key)">
        {{getValidationMsg(key)}}
      </div>
      <div class="image-container">

        <img ng-if="hasImage($parent.key)" ng-src="{{values[$parent.key]}}" />
      </div>
    </fieldset>

    <fieldset ng-if="value.type == 'date'">

      <label for="{{$parent.key}}">{{$parent.value.label | lowercase}}</label>
      <input type="date" ng-model="values[$parent.key]" />
      <div class="warning" ng-show="isInvalid(key)">
        {{getValidationMsg(key)}}
      </div>
    </fieldset>

    <fieldset ng-if="value.type == 'file'">
      <label for="{{$parent.key}}">{{$parent.value.label | lowercase}}</label>
      <div class="filename">
        <div>
          FileName: <a ng-href="{{values[$parent.key]}}">{{values[$parent.key]}}</a>
        </div>
        <input id="{{$parent.key}}" type="file" />
      </div>

      <a class="button" ng-click="uploadFile($parent.key)">upload</a>
      <div class="warning" ng-show="isInvalid(key)">
        {{getValidationMsg(key)}}
      </div>
    </fieldset>

    <fieldset ng-if="value.type == 'html'">
      <label class="code-mirror-label" for="{{$parent.key}}">{{$parent.value.label | lowercase}}</label>
      <div class="code-mirror-container" id="code-mirror-{{$parent.key}}"></div>
      <div class="warning code-mirror-warning" ng-show="isInvalid(key)">
        {{getValidationMsg(key)}}
      </div>
    </fieldset>

    <fieldset ng-if="value.type == 'file'">
      <label for="{{$parent.key}}">{{$parent.value.label | lowercase }}</label>
      <div class="filename">
        <div>
          FileName: <a ng-href="{{values[$parent.key]}}">{{values[$parent.key]}}</a>
        </div>
        <input id="{{$parent.key}}" type="file" />
        <input type="hidden" />
      </div>
      <div>
        {{getValidationMsg(key)}}
      </div>
    </fieldset>
  </div>

  <button type="button" ng-click="reset()">reset</button>
  <input type="submit" value="save" ng-click="save()" />

</form>
